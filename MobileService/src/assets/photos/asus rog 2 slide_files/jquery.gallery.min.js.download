var preLoadedImages=[];var hsize=901;var wsize=0;var qlty=80;var crop=1;var lImages=[];var gaMain=1;setSpeedVariables();var speedCookie='';speedCookie=getCookie("client-conn");jQuery(window).load(function(){var hasBeenTrigged=false;$(window).scroll(function(){if($(this).scrollTop()>=100&&!hasBeenTrigged){hasBeenTrigged=true;speedCookie=getCookie("client-conn");speedCookie='fast';if(speedCookie==''||speedCookie==null){var myIframe=parent.document.getElementById("speedCheck");var script=myIframe.contentWindow.document.createElement("script");script.type="text/javascript";script.src="/js/checkspeed.js";myIframe.contentWindow.document.body.appendChild(script);}
$.ajax({url:"/gallery_new.php",beforeSend:function(xhr){xhr.overrideMimeType("text/plain; charset=x-user-defined");}}).done(function(data){document.getElementById("gallery_new").innerHTML=data;loadApiData();});$('.related_section1').mCustomScrollbar({mouseWheelPixels:100});$('.gallery_overlay, #closeOverlay').click(function(){$('#gallery_new, .gallery_overlay').fadeOut(100);});}});});function loadApiData(){$.ajax({dataType:"json",url:document.getElementById("gal_api").value,headers:{'source':'wap','kivanon':getKeyCypher()},}).done(function(data){myGalData1=data['results'];myGalData2=data['results']['galleries'];loadGalleryData(data['results']['galleries'],'Design');nGallery('#slider','.control_next','.control_prev','.glry_left_wrp');toggleArrows("right");overlayGa();});}
function overlayGa(){document.getElementById('overlay1').onclick=function(){gaMain=1;}}
function toggleArrows(direc){if(direc=='right'){document.getElementById('overlay1').onmouseover=function(){$('.control_next').hide();}
document.getElementById('gallery91_wrap').onmouseover=function(){$('.control_next').show();}}
else if(direc=='left'){document.getElementById('overlay1').onmouseover=function(){$('.control_prev').hide();}
document.getElementById('gallery91_wrap').onmouseover=function(){$('.control_prev').show();}}
else if(direc=='no'){document.getElementById('overlay1').onmouseover=function(){$('.control_prev').hide();}
document.getElementById('gallery91_wrap').onmouseover=function(){$('.control_prev').hide();}}
else{document.getElementById('overlay1').onmouseover=function(){$('.control_next').hide();$('.control_prev').hide();}
document.getElementById('gallery91_wrap').onmouseover=function(){$('.control_next').show();$('.control_prev').show();}}}
gType='';function loadGalleryData(myGalData,gName,gType){slidIndex=1;var gHtml='';var tHtml='';var aHtml='';var glCatText='';var albumImages='';setSpeedVariables();$.each(myGalData,function(i,gData){$('.glry_vw_mr').hide();if(typeof gData==='undefined'||gData==null||gData==''){return false;}
if(gData['gl_cat_name']!=gName&&gData['gl_cat_name']!='Design2'){$('.glry_vw_mr').show();if(gData['gl_cat_name']!='Videos'){albumImages=gData['all_images'];var catImage=modifyImageUrl(albumImages[0]['thumb'],75,0,qlty,crop);if(gData['gl_cat_name']=='View 360'){var catBigImage=albumImages[0]['thumb'];}
else if(gData['gl_cat_name']=='Slide Share'){$('.glry_vw_mr').show();var catBigImage=albumImages[0]['thumb'];}
else{var catBigImage=modifyImageUrl(albumImages[0]['large'],hsize,wsize,qlty,crop);}}
else{$('.glry_vw_mr').show();albumImages=gData['all_videos'];var catImage=albumImages[0]['thumb'];var catBigImage=albumImages[0]['large'];}
var categoryName=gData['gl_cat_name'];aHtml=aHtml+'<div class="cat_album" onclick="loadGalleryData('+'myGalData2'+',&quot;'+categoryName+'&quot;,&quot;albums&quot;)"><div class="album_title">'+gData['gl_cat_text']+'</div><div class="cat_images "><img onmouseover="preloadFromThumb(\''+catBigImage+'\')" src="'+catImage+'" class="block_img"></div></div>';}
if(gName=="Design_2"){gName="Design";}
if(gData['gl_cat_name']==gName){sectionName=gName;if(gData['gl_cat_name']!='Videos'){albumImages=gData['all_images'];}else{albumImages=gData['all_videos'];}
iData=albumImages;var slidenum=1;glCatText=gData['gl_cat_text'];lImages=[];iData.forEach(function(sData){if(gData['gl_cat_name']!='Videos'){if(gData['gl_cat_name']=='View 360'){$('.captionback').show();var url360=sData['large'].split('.com');var thumbsrc=modifyImageUrl(sData['thumb'],50,0,qlty,crop);gHtml=gHtml+'<li data-slide="'+slidenum+'" data-caption="'+sData['caption']+'" data-gallery="'+gName+'"><div class="glry_img_wrp"><iframe scrolling="no" style="height: 100%; width: 100%; visibility: visible;" src="'+url360[1]+'" frameborder="0" allowfullscreen></iframe></div></li>';}
else{if(gData['gl_cat_name']=='Slide Share'){$('.glry_vw_mr').show();$('.captionback').hide();var thumbsrc=sData['thumb'];gHtml=gHtml+'<li data-slide="'+slidenum+'" data-caption="'+sData['caption']+'" data-gallery="'+gName+'"><div class="glry_img_wrp"><iframe scrolling="no" style="height: 100%; width: 100%; visibility: visible;" src="'+sData['large']+'" frameborder="0" allowfullscreen></iframe></div></li>';}
else{$('.captionback').show();var datasrc=modifyImageUrl(sData['large'],hsize,wsize,qlty,crop);if(preLoadedImages.indexOf(datasrc)>-1){var thumbsrc=datasrc;}
else{var thumbsrc=modifyImageUrl(sData['large'],50,0,qlty,crop);}
gHtml=gHtml+'<li data-slide="'+slidenum+'" data-caption="'+sData['caption']+'" data-gallery="'+gName+'"><div class="glry_img_wrp"><img class="glry_img_blur" src="'+thumbsrc+'" data-src="'+datasrc+'"></div></li>';}}}
else{$('.glry_vw_mr').show();$('.captionback').show();var datasrc=sData['large'];if(preLoadedImages.indexOf(datasrc)>-1){var thumbsrc=datasrc;}
else{var thumbsrc=sData['thumb'];}
var videoId=sData['video_id'];gHtml=gHtml+'<li data-slide="'+slidenum+'" data-caption="'+sData['caption']+'" data-gallery="'+gName+'"><div class="glry_img_wrp"><div class="video_overlay" id="'+videoId+'" onclick="playYouVideo(\''+videoId+'\')"><div class="youtube_play"></div></div><img class="glry_img_blur" src="'+thumbsrc+'" data-src="'+datasrc+'"></div></li>';}
var thumb_active="";if(slidenum==1){thumb_active="thumb_active";}
tHtml=tHtml+'<li li-num="'+slidenum+'"><div class="sml_thmb '+thumb_active+'" data-slide="'+slidenum+'" onclick="ImageIndex('+"'#slider'"+','+slidenum+','+"1"+')"><img src="'+thumbsrc+'"></div></li>';if(slidenum<40){lImages.push(datasrc);}
slidenum++;});document.getElementById("imgdiv").innerHTML=gHtml;document.getElementById("thumbimgdiv").innerHTML=tHtml;document.getElementById("gMainTitle").innerHTML=myGalData1['pro_name'];document.getElementById("gal_title").innerHTML=myGalData1['pro_name'];document.getElementById("gMainAlbum").innerHTML=gName;document.getElementById("current_album").innerHTML=glCatText;resetGallery();var totalLi=$("#slider ul").find('li').length;showHideArrows(totalLi,slidIndex);var dataCaption=$('#slider ul li:first-child').attr('data-caption');$('.photocaption').text(dataCaption);customThumbSlider();hideThumbArrowGal();if(gType=="albums"){setGaMetrix(gType);}}});document.getElementById("related_section2").innerHTML=aHtml;preload(lImages);}
function setGaMetrix(gType){if(gType=='thumbmain'&&gaMain==1){_gaq.push(['_trackEvent','detail-overview','Image',''+myGalData1['pro_name']+'::'+myGalData1['id']+'::'+myGalData1['pro_cat_id']+'',1,false]);gaMain=0;}
if(gType=='experience'){_gaq.push(['_trackEvent','detail-overview','album-'+sectionName,''+myGalData1['pro_name']+'::'+myGalData1['id']+'::'+myGalData1['pro_cat_id']+'',1,false]);}
if(gType=='albums'){}}
function playYouVideo(videoId){if(navigator.userAgent.toLowerCase().indexOf('firefox')>-1){var yAutoPlay='';}
else{var yAutoPlay='autoplay=1&';}
var myIframeData='<iframe scrolling="no" style="height: 100%; width: 100%; visibility: visible;" src="https://www.youtube.com/embed/'+videoId+'?'+yAutoPlay+'enablejsapi=1" frameborder="0" autoplay="1" allowfullscreen></iframe>';document.getElementById(videoId).innerHTML=myIframeData;}
function preload(arrayOfImages,index){index=index||0;if(arrayOfImages&&arrayOfImages.length>index){var img=new Image();img.onload=function(){if(preLoadedImages.indexOf(arrayOfImages[index])>-1){}
else{preLoadedImages.push(arrayOfImages[index]);}
$('*[data-src="'+arrayOfImages[index]+'"]').attr('src',arrayOfImages[index]).removeClass('glry_img_blur');preload(arrayOfImages,index+1);};img.src=arrayOfImages[index];}}
function preloadFromThumb(url){var l2Images=[];l2Images.push(url);preload(l2Images);}
function resetGallery(){$slider=$('.thumb_div'),liW=$slider.find('li:first').width(),liFW=(liW*$slider.find('li').length);$slider.width(liFW);}
gType='';function open_gallery(url,galName,gType){loadGalleryData(myGalData2,galName,gType);sliderLen=$('.thumb_div').find('li').length;if(url!=''){getSlideNum(url,galName);}
else{ImageIndex('#slider',1);}
moveThumbsWithMain("right");$('#gallery_new, .gallery_overlay').fadeIn(100).show();$('#slider').css({width:$('.glry_left_wrp').width(),height:$('.glry_left_wrp').height()});hideThumbArrowGal();if($('.thumb_div').find('li').length==slidIndex){$('.thumb_move_right').hide();}
setGaMetrix(gType);}
function getSlideNum(url,galName){if(galName=="Design"){galName="Design2";}
if(galName=="Design_2"){galName="Design";}
myGalData2.forEach(function(gData){var albumImages='';if(galName!='Videos'){albumImages=gData['all_images'];}else{albumImages=gData['all_videos'];}
if(gData['gl_cat_name']==galName){iData2=albumImages;var slidenumm=1;iData2.forEach(function(sData){if(sData['thumb']==url||'www.'+sData['thumb']==url){ImageIndex('#slider',slidenumm);slidIndex=slidenumm;return slidenumm;}
slidenumm++;});}});}
function close_gallery(){$('#gallery_new, .gallery_overlay').fadeOut(100);if(gaMain==0){}
gaMain=1;}
function getCookie2(name){var dc=document.cookie;var prefix=name+"=";var begin=dc.indexOf("; "+prefix);if(begin==-1){begin=dc.indexOf(prefix);if(begin!=0)return null;}
else{begin+=2;var end=document.cookie.indexOf(";",begin);if(end==-1){end=dc.length;}}
return decodeURI(dc.substring(begin+prefix.length,end));}
function getCookie(cname){var name=cname+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' '){c=c.substring(1);}
if(c.indexOf(name)==0){return c.substring(name.length,c.length);}}
return'';}
function setSpeedVariables(){speedCookie=getCookie("client-conn")
if(speedCookie=='fast'){hsize=901;wsize=0;qlty=80;crop=1;}
if(speedCookie=='medium'){hsize=701;wsize=0;qlty=70;crop=1;}
if(speedCookie=='slow'){hsize=501;wsize=0;qlty=60;crop=1;}}
function modifyImageUrl(url,hsize,wsize,qlty,crop){var newURL=url+'?w='+wsize+'&h='+hsize+'&q='+qlty+'&c='+crop;return newURL;}
function escapeRegExp(str){return str.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1");}
function replaceAll(str,find,replace){return str.replace(new RegExp(escapeRegExp(find),'g'),replace);}
function extractDomain(url){var domain;if(url.indexOf("://")>-1){domain=url.split('/')[2];}
else{domain=url.split('/')[0];}
domain=domain.split(':')[0];return domain;}
function customThumbSlider(){var animating=false,iXS=4,$slider=$('.thumb_div'),liW=$slider.find('li:first').width(),liFW=(liW*$slider.find('li').length);sliderLen=$slider.find('li').length;$slider.width(liFW);if($slider.find('li').length<=iXS){$('.thumb_move_right').hide();$('.thumb_move_left').hide();}
if(slidIndex>iXS){var cLeft=-((slidIndex*liW)-liW);}
else{var cLeft=0;}
$slider.css({left:cLeft});$('.np').unbind("click");var sliderun='';sliderun=function(e){e.preventDefault();if(!animating){var left=Math.abs(parseInt($slider.css('left')));var dDirection=$(this).data('direction');var side=($(this).data('direction')=='right')?(((left+(liW*iXS))>=liFW)?0.0011:-(left+liW)):((left>0)?-(left-liW):0.0012);if($(this).data('direction')=='right'){}
else{}
if(side==0.0011){$('.thumb_move_right').hide();}
else{$('.thumb_move_right').show();}
if(side==0.0012){$('.thumb_move_left').hide();}
else{$('.thumb_move_left').show();}
if(side!=0.0011&&side!=0.0012&&$slider.find('li').length>4){rotate(side);}}};$('.np').on('click',sliderun);var rotate=function(leftY){if(!animating){animating=true;$slider.stop(true,true).animate({left:leftY},500,function(){animating=false;});}}}
ga='';function ImageIndex(galleryId,slideIndex,ga){this.selfId=galleryId;var totalLi=$(this.selfId+" ul").find('li').length;showHideArrows(totalLi,slideIndex);var dataSlide=$(this.selfId+" ul").find("[data-slide='"+slideIndex+"']").index();var dataCaption=$(this.selfId+" ul").find("[data-slide='"+slideIndex+"']").attr('data-caption');$(this.selfId+' ul li:eq('+dataSlide+')').prependTo(this.selfId+' ul');$('.photocaption').text(dataCaption);$('.sml_thmb').removeClass('thumb_active');$(".thumb_div li:nth-child("+slideIndex+")").find('div').addClass("thumb_active");thumwidth=$('.thumb_div li').width();slidIndex=slideIndex;if(ga==1){}}
function showHideArrows(totalLi,slideIndex){if(totalLi==1){$('.control_prev').hide();$('.control_next').hide();$('.thumb_move_right').hide();$('.thumb_move_left').hide();toggleArrows("no");hideThumbArrow();return;}
if(slideIndex==totalLi){$('.control_prev').show();$('.control_next').hide();$('.thumb_move_right').hide();$('.thumb_move_left').show();hideThumbArrow();toggleArrows("left");return;}
if(slideIndex<totalLi){if(slideIndex<=1){$('.control_prev').hide();$('.control_next').show();$('.thumb_move_right').show();$('.thumb_move_left').hide();hideThumbArrow();toggleArrows("right");return;}
else{$('.control_prev').show();$('.control_next').show();$('.thumb_move_right').show();$('.thumb_move_left').show();toggleArrows("both");hideThumbArrow();return;}}}
function hideThumbArrow(){var thumbNum=$('.thumb_div').find('li').length;if(thumbNum<=4){$('.thumb_move_right').hide();$('.thumb_move_left').hide();}
if(slidIndex==1){$('.thumb_move_left').hide();}}
function hideThumbArrowGal(){var thumbNum=$('.thumb_div').find('li').length;$('.thumb_move_right').show();$('.thumb_move_left').show();if(thumbNum<=4){$('.thumb_move_right').hide();$('.thumb_move_left').hide();}
if(slidIndex==1){$('.thumb_move_left').hide();}}
function nGallery(galleryId,aNId,aPId,gResize){var selfId=galleryId;var slideCount=$(selfId+' ul li').length;var slideWidth=$(selfId+' ul li').width();var slideHeight=$(selfId+' ul li').height();var sliderUlWidth=slideCount*slideWidth;$(selfId).css({width:$(gResize).width(),height:$(gResize).height()});activeThumbs();if(gResize.length>1){$(window).resize(function(){$(selfId).css({width:$(gResize).width(),height:$(gResize).height()});});$(selfId).css({width:$(gResize).width(),height:$(gResize).height()});}
var dataCaption=$(selfId+' ul li:lt('+slidIndex+')').attr('data-caption');$('.photocaption').text(dataCaption);var moveRight=function(){$(selfId+' ul').animate({left:0,},10,function(){$(selfId+' ul').css('left','0');if(slidIndex>1){slidIndex=slidIndex-1;moveThumbsWithMain("left");var dataSlide=$(selfId+" ul").find("[data-slide='"+slidIndex+"']").index();var nextChild=dataSlide+1;$(selfId+' ul li:nth-child('+nextChild+')').prependTo(selfId+' ul');var dataCaption=$(selfId+' ul li:first-child').attr('data-caption');$('.photocaption').text(dataCaption);activeThumbs();}
var nli=$('#imgdiv').find('li').length;showHideArrows(nli,slidIndex);$(selfId+' ul').css('left','0');});};function moveLeft(){$(selfId+' ul').animate({left:0},10,function(){$(selfId+' ul').css('left','0');var nli=$('#imgdiv').find('li').length;if(slidIndex<nli){slidIndex=slidIndex+1;moveThumbsWithMain("right");var dataSlide=$(selfId+" ul").find("[data-slide='"+slidIndex+"']").index();var nextChild=dataSlide+1;$(selfId+' ul li:nth-child('+nextChild+')').prependTo(selfId+' ul');$(selfId+' ul').css('left','');var dataCaption=$(selfId+' ul li:first-child').attr('data-caption');$('.photocaption').text(dataCaption);activeThumbs();}
showHideArrows(nli,slidIndex);$(selfId+' ul').css('left','0');});};function activeThumbs(){var dataSlideBig=$('#slider ul li:first-child').attr('data-slide');var dataSlidethumb=$('.thumb_div').find("[data-slide='"+dataSlideBig+"']").attr('data-slide');$('.thumb_div').find(".sml_thmb").removeClass('thumb_active');$('.thumb_div').find("[data-slide='"+dataSlideBig+"']").removeClass('thumb_active').addClass('thumb_active');}
document.onkeydown=checkKey;function checkKey(e){e=e||window.event;if(e.keyCode=='37'){moveRight();}
else if(e.keyCode=='39'){moveLeft();}}
$(aNId).click(function(){moveLeft();});$(aPId).click(function(){moveRight();});}
var thumwidth=$('.thumb_div li').width();function moveThumbsWithMain(direction){var liW=$('.thumb_div').find('li:first').width();var liLen=$('.thumb_div').find('li').length;var liFW=(liW*liLen);if(direction=='left'){var leftY=parseInt($('.thumb_div').css('left'))+liW;}
if(direction=='right'){var leftY=parseInt($('.thumb_div').css('left'))-liW;}
if(slidIndex>4){var cLeft=-((slidIndex*liW)-liW);}
else{var cLeft=0;}
var animating=true;if((slidIndex>4&&slidIndex<=(liLen-3))||((direction=='left')&&slidIndex>1&&slidIndex<=(liLen-3))){var animating=false;}
if(slidIndex<=4){var animating=false;cLeft=0;}
if(slidIndex>(liLen-3)){var animating=false;cLeft=-(liFW-(4*liW));}
if(sliderLen<4){var animating=true;}
if(!animating){animating=true;$('.thumb_div').stop(true,true).animate({left:cLeft},500,function(){animating=false;});}
if(liLen==slidIndex){$('.thumb_move_right').hide();}};